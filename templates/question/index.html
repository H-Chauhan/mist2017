{% load static %}
<!DOCTYPE html>
<!--[if lt IE 9 ]><html class="ie ie-lt9 no-js" lang="en"><![endif]-->
<!--[if IE 9 ]><html class="ie ie9 no-js" lang="en"><![endif]-->
<!--[if gt IE 9 | !IE]><!-->
<html class="no-js fixed" lang="en">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="This event invites scholarly individuals from all around the world to participate in the most spectacular quiz of the year. It is an online event and will be conducted through an online portal.">
    <meta name="keywords" content="mist troika ieee dtu techfest treasure hunt game">
    <meta name="author" content="ieeedtu">
    <title>MIST</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.red-indigo.min.css">
    <link rel="stylesheet" href='{% static "styles.css" %}'>
    <link rel="stylesheet" href='{% static "custom.css" %}'> </head>

<body>
    <div class="mdl-layout mdl-js-layout mdl-layout--fixed-drawer mdl-layout--fixed-header">
        <header class="demo-header mdl-layout__header mdl-color--red-800 mdl-color-text--white">
            <div class="mdl-layout__header-row"> <span class="mdl-layout-title">MIST</span>
                <div class="mdl-layout-spacer"></div>
                <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" id="hdrbtn"> <i class="material-icons">more_vert</i> </button>
                <ul class="mdl-menu mdl-js-menu mdl-js-ripple-effect mdl-menu--bottom-right" for="hdrbtn">
                    <li class="mdl-menu__item">About</li>
                    <li class="mdl-menu__item">Forum</li>
                </ul>
            </div>
        </header>
        <div class="demo-drawer mdl-layout__drawer mdl-color--blue-grey-900 mdl-color-text--white">
            <header class="demo-drawer-header"> <img src="http://graph.facebook.com/{{social_account.uid}}/picture?height=100" class="demo-avatar">
                <div class="demo-avatar-dropdown">
                    <h5>{{player.user.first_name }} {{player.user.last_name}}</h5>
                    <div class="mdl-layout-spacer"></div>
                </div>
            </header>
            <nav class="demo-navigation mdl-navigation mdl-color--blue-grey-800"> <a class="mdl-navigation__link" href=""><i class="mdl-color-text--blue-grey-400 material-icons" role="presentation">home</i>Home</a> <a class="mdl-navigation__link" href=""><i class="mdl-color-text--blue-grey-400 material-icons" role="presentation">format_list_numbered</i>Leaderboard</a> </nav>
        </div>
        <main class="mdl-layout__content mdl-color--grey-300" id="questionwindow">
            <div class="mdl-grid">
                <div class="mdl-color--white mdl-shadow--2dp mdl-cell mdl-cell--12-col mdl-grid">
                    <h3> &nbsp; LEVEL {{question.level}}</h3> </div>
                <div class="mdl-cell mdl-cell--8-col mdl-grid">
                    <div class="mdl-card__supporting-text mdl-color--white mdl-shadow--2dp mdl-cell mdl-cell--12-col">
                        <h4> {{question.question_text}}</h4> </div>
                    <div class="mdl-card__supporting-text mdl-color--white mdl-shadow--2dp mdl-cell mdl-cell--12-col"> {{question.html | safe}} </div>
                    <div class="mdl-card mdl-color--white mdl-shadow--2dp mdl-cell mdl-cell--12-col">
                        <div class="mdl-card__media text-center"> <img src="{{question.image.url}}" style="max-width:100%;"> </div>
                    </div>
                    <div class="mdl-card__supporting-text mdl-color--white mdl-shadow--2dp mdl-cell mdl-cell--12-col">
                        <video controls width=100%>
                            <source src="{{question.video.url}}" type="video/mp4"> Your browser does not support audio. </video>
                    </div>
                    <div class="mdl-card__supporting-text mdl-color--white mdl-shadow--2dp mdl-cell mdl-cell--12-col">
                        <audio controls style="width:100%;">
                            <source src="{{question.audio.url}}" type="audio/mpeg"> Your browser does not support audio. </audio>
                    </div>
                </div>
                <div class="mdl-cell mdl-cell--4-col mdl-grid">
                    <div class="mdl-card mdl-color--red-500 mdl-shadow--2dp mdl-cell mdl-cell--12-col" style="height:200px;">
                        <div class="mdl-card__supporting-text mdl-color-text--white">
                            <h4 class="text-center"><i class="material-icons">star</i> Your current rank <i class="material-icons">star</i></h4>
                            <h1 class="text-center">{{rank}}</h1> </div>
                    </div>
                </div>
            </div>
        </main>
        <div class="mdl-layout__content mdl-color--white" id="answerwindow">
            <form autocomplete="off" method="POST" id="answer-form">
                <input autocomplete="false" name="hidden" type="text" style="display:none;">
                <div class="mdl-grid no-padding">
                    <div class="mdl-cell--11-col mdl-grid mdl-cell--7-col-tablet mdl-cell--3-col-phone no-padding">
                        <div class="mdl-textfield mdl-js-textfield" id="answer-input">
                            <input class="mdl-textfield__input" type="text" id="key" style="font-size:large">
                            <label class="mdl-textfield__label mdl-color-text--grey-600" for="key" style="font-size:large;">Write the answer...</label>
                        </div>
                    </div>
                    <div class="mdl-cell mdl-cell--1-col mdl-cell--1-col-tablet mdl-cell--1-col-phone text-center">
                        <button class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored mdl-color--red-500"> <i class="material-icons">send</i> </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <div aria-live="assertive" aria-atomic="true" aria-relevant="text" class="mdl-snackbar mdl-js-snackbar">
        <div class="mdl-snackbar__text"></div>
        <button type="button" class="mdl-snackbar__action"></button>
    </div>
    <script src="https://code.getmdl.io/1.3.0/material.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="{{question.script.url}}"></script>
    <script>
        $("form#answer-form").submit(function (e) {
            var notification = document.querySelector('.mdl-js-snackbar');
            $.post("/question/answer/", {
                "answer": $("input#key").val()
            }, function (data, status) {
                if(data === "False") {
                    notification.MaterialSnackbar.showSnackbar({
                        message: 'Wrong Answer',
                        timeout: 1000
                    });
                } else {
                    location.href = location.href;
                }
            });
            e.preventDefault();
        });
    </script>
</body>

</html>